AceSlideII页面工具
邹业盛
%%mtime(%Y-%m-%d %H:%M)
%!encoding: utf-8
%%toc


=项目=

之前有一个 AceSlide 的项目，是完全使用 HTML+CSS+JS 实现的演示文档工具。现在这个 AceSlideII 是它的进化，对我来说是这样的。同时，其功能也不仅限于演示文档了。

- 项目：https://github.com/AceFantasy/AceSlideII
- 协议：LGPL
- 近况：自己日常使用，少有改动

最直接地搞明白这个项目是干什么就，就是马上使用它一下：

'''
<a href="javascript: (function(){ if((typeof dojo) != 'undefined'){return} window.dojoConfig = { async: true , packages: [ {name: 'AceSlideII', location: 'http://zouyesheng.com/static/AceSlideII'} ] , deps: ['AceSlideII/init'] , callback: function(init){ init({width: 600}); } }; var n = document.createElement('script'); n.type='text/javascript'; n.src='http://ajax.googleapis.com/ajax/libs/dojo/1.8.0/dojo/dojo.js'; document.getElementsByTagName('head')[0].appendChild(n); })();">点击我就可以看到效果了，想下次用就请添加到收藏夹</a>
'''


=缘起=

从项目的名字就可以看出，这已经是一个第二代的东西了。其实，最开始的时候，我是想用 HTML+CSS+JS 来实现一套演示文档工具。因为，大部分时候，我在演示文档上仅会碰到一些代码类的内容。对于这些内容，动用 LaTeX 来做 PDF 类型的演示文档，可是一件吃力不讨好的事，比较累，而且因为内容的关系，也表现不出其排版精致的优点。相反，在代码高亮上表现还不是很好。同时，这些内容如何使用 HTML 为载体来做，其直接表现形式就好很多。（当然，对于数学公式，也是有考虑支持的，不过效果就不能直接和 PDF 中的比了）

在 AceSlide 中，我实现了我最开始想法，而且，是从 Beamer 中得到的实现启发，对列表编号的处理，与演示效果是自动化的。

但是随后我发现一个问题，完全使用 HTML 去做一份演示文档，也是一件吃力不讨好的事。成本太大了，虽然实现出来的效果不错，而且自己完全拥有控制力，手写 js 都可以。

然后我想起以前在 [CTEX http://bbs.ctex.org/forum.php] 论坛，有人讨论到演示文档时，提到说，我有一份写好的文章，我其实只需要把它的形式（纸张的大小，标题样式等）改变一下，就可以是一份很好的演示文档。我发现我目前经常碰到的情况就是这样。我不需要刻意去做一份演示文档，我只需要把一些文章的形式改变一下，就可以做演示之用。

于是，根据这个想法，很自然地想到直接使用 js 去改变页面结构，然后添加一些演示用的功能即可。

后来，又想到了“搜狗云输入法”的使用方式，可以通过收藏，链接等方式，执行 js 页面注入，以此来调用我的 js ，完成页面格式化，与演示功能载入。

当到这一步的时候，我突然发现，演示功能只是一点，这种 js 注入的方式还可以做好多其它有意思的事，比如，我同时打开 163 和 sohu 的邮箱，然后点一下收藏的链接，就可以把 163 中的联系人全部导入到 sohu 中去。

想到这里，又想起之前在第一份工作时，想到的直接把页面中的题录信息保存到 NoteExpress 软件中的想法（当时还录了一个视频 http://v.youku.com/v_show/id_XMTc1OTQ3NDA4.html）。之前是使用“油猴”脚本来实现的，其实这种 js 注入式的方式完全可以替代油猴脚本，并且因为是远程载入，还可以统一部署与维护（比如根据 url 载入特定功能的代码）。


好了，上面的最开始给出的链接，除了可以作用于本站的所有页面外，作为演示，还可以作用于天幻网的 VP 人物页：http://vp.ffsky.cn/chrs2.htm （收藏链接，然后进入页面后点一下即可使用看到效果）


=原理=

基本的原理，上面已经说得差不多了。就是使用 js 改动页面结构，然后加上演示需要的控制功能就可以了。

另外要说的一点就是，在项目代码中，还包括了一个服务器端的实现，用处嘛，就是可以实现终端控制。比如，你自己的演示电脑运行服务器，其它机器作为客户端从你的电脑上获取到演示文档内容。这里你可以控制客户端的表现（你翻页时客户机也翻页，你做的标记也全部会在客户机上显示出来）。

哦，还有就是， AceSlideII 的代码中，加了一点对手持设置（比如手机）的滑动行为支持。手持设置+服务器端=演示遥控器 :)
