<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>做分页器时的一点感触 - YS.Zou</title>
<meta name="generator" content="http://txt2tags.org" />
<meta name="author" content="Yesheng Zou,YS.Zou,邹业盛"/>
</head>
<body style=" margin: 0px; padding: 0px; background-color: #e0e0e0; font-family: Arial,Helvetica,sans-serif; ">
<div style=" width: 800px; margin: auto; font-size: 17px; line-height: 1.7em; color: #333; letter-spacing: 1px; padding: 30px; background-color: white; ">

<h1 style=" color: black; letter-spacing: 0.2em; text-align: center; font-size: x-large; font-weight: bold; margin: 30px auto 30px auto; ">做分页器时的一点感触</h1>

<div style=" float: right; font-size: 13px; color: #777; ">
    <ul style=" text-align: right; ">
        <li style=" list-style-type: none; border-right: 4px solid rgb(0, 120, 181); padding-right: 10px; ">2015-04-03 01:34 更新</li>
        <li style=" list-style-type: none; border-right: 4px solid rgb(0, 120, 181); padding-right: 10px; ">邹业盛</li>
    </ul>
</div>


  <ol style="line-height: 1.6em; padding: 0px; padding-left: 20px; margin: auto 30px;">
  <li><a href="#toc1" style="color: #0184b7; text-decoration: none">问题的由来</a>
  </li>
  <li><a href="#toc2" style="color: #0184b7; text-decoration: none">自然的, 麻烦的思路</a>
  </li>
  <li><a href="#toc3" style="color: #0184b7; text-decoration: none">换个角度入手</a>
  </li>
  <li><a href="#toc4" style="color: #0184b7; text-decoration: none">为何会有如此大的区别</a>
  </li>
  <li><a href="#toc5" style="color: #0184b7; text-decoration: none">AngularJS的代码例子</a>
  </li>
  </ol>


<a name="toc1"></a>
<h1 style=" padding: 4px; line-height: 1.3em; margin: 50px auto; font-size: 22px; border-bottom: 1px solid; clear: both;">1. 问题的由来</h1>

<p style="margin: 15px 0;">
前段时间要做一个分页器, 大概是下面这个样子:
</p>

<div style="background: #ffffff"><div style="width: 30%; height: 20px; border-top: 1px dashed gray; border-left: 1px dashed gray;"></div><pre style=" background-color: white; font-size: small; line-height: 1.5em; padding: 0 15px 0 15px; margin: 0;">1 2 3 ... 7 [8] 9 ... 12 13 14
</pre><div style="width: 30%; height: 20px; border-bottom: 1px dashed gray; border-left: 1px dashed gray;"></div></div>


<p style="margin: 15px 0;">
只要有一点相关经验的人都知道, 这个看似简单的东西, 实现起来其实是很麻烦的. 原因在于, 你面对的"总页数和当前页的关系", 不一定是上面这种"理想情况". 比如:
</p>
<p style="margin: 15px 0;">
一共只有 3 页:
</p>

<div style="background: #ffffff"><div style="width: 30%; height: 20px; border-top: 1px dashed gray; border-left: 1px dashed gray;"></div><pre style=" background-color: white; font-size: small; line-height: 1.5em; padding: 0 15px 0 15px; margin: 0;">1 2 3
</pre><div style="width: 30%; height: 20px; border-bottom: 1px dashed gray; border-left: 1px dashed gray;"></div></div>


<p style="margin: 15px 0;">
一共有 4 页:
</p>

<div style="background: #ffffff"><div style="width: 30%; height: 20px; border-top: 1px dashed gray; border-left: 1px dashed gray;"></div><pre style=" background-color: white; font-size: small; line-height: 1.5em; padding: 0 15px 0 15px; margin: 0;">1 2 3 4
</pre><div style="width: 30%; height: 20px; border-bottom: 1px dashed gray; border-left: 1px dashed gray;"></div></div>


<p style="margin: 15px 0;">
一共有 6 页:
</p>

<div style="background: #ffffff"><div style="width: 30%; height: 20px; border-top: 1px dashed gray; border-left: 1px dashed gray;"></div><pre style=" background-color: white; font-size: small; line-height: 1.5em; padding: 0 15px 0 15px; margin: 0;">1 2 3 4 5 6
</pre><div style="width: 30%; height: 20px; border-bottom: 1px dashed gray; border-left: 1px dashed gray;"></div></div>


<p style="margin: 15px 0;">
一共有 7 页(当前页是第 6 页):
</p>

<div style="background: #ffffff"><div style="width: 30%; height: 20px; border-top: 1px dashed gray; border-left: 1px dashed gray;"></div><pre style=" background-color: white; font-size: small; line-height: 1.5em; padding: 0 15px 0 15px; margin: 0;">1 2 3 ... 5 [6] 7
</pre><div style="width: 30%; height: 20px; border-bottom: 1px dashed gray; border-left: 1px dashed gray;"></div></div>


<p style="margin: 15px 0;">
一共有 7 页(当前页是第 4 页):
</p>

<div style="background: #ffffff"><div style="width: 30%; height: 20px; border-top: 1px dashed gray; border-left: 1px dashed gray;"></div><pre style=" background-color: white; font-size: small; line-height: 1.5em; padding: 0 15px 0 15px; margin: 0;">1 2 3 [4] 5 6 7
</pre><div style="width: 30%; height: 20px; border-bottom: 1px dashed gray; border-left: 1px dashed gray;"></div></div>


<p style="margin: 15px 0;">
一共有 14 页, 当前页是 13 页(最开始的例子, 当前页是第 8 页):
</p>

<div style="background: #ffffff"><div style="width: 30%; height: 20px; border-top: 1px dashed gray; border-left: 1px dashed gray;"></div><pre style=" background-color: white; font-size: small; line-height: 1.5em; padding: 0 15px 0 15px; margin: 0;">1 2 3 ... 12 [13] 14
</pre><div style="width: 30%; height: 20px; border-bottom: 1px dashed gray; border-left: 1px dashed gray;"></div></div>


<p style="margin: 15px 0;">
上面几个简单的例子, 足以说明问题, 这玩意儿真的很麻烦, 如果你用传统的方法去做.
</p>
<p style="margin: 15px 0;">
回到理想情况的例子:
</p>

<div style="background: #ffffff"><div style="width: 30%; height: 20px; border-top: 1px dashed gray; border-left: 1px dashed gray;"></div><pre style=" background-color: white; font-size: small; line-height: 1.5em; padding: 0 15px 0 15px; margin: 0;">1 2 3 ... 7 [8] 9 ... 12 13 14
</pre><div style="width: 30%; height: 20px; border-bottom: 1px dashed gray; border-left: 1px dashed gray;"></div></div>


<p style="margin: 15px 0;">
这个分页器的显示规则, 大概可以描述成 " <em style=" color: #d75100; font-style: normal; ">显示前 3 页, 显示后 3 页, 以及当前页的前后 1 页</em> " .
</p>
<p style="margin: 15px 0;">
或者, 可以扩展为 " <em style=" color: #d75100; font-style: normal; ">显示前 L 页, 显示后 R 页, 以及当前页的前后 M 页</em> " .
</p>

<a name="toc2"></a>
<h1 style=" padding: 4px; line-height: 1.3em; margin: 50px auto; font-size: 22px; border-bottom: 1px solid; clear: both;">2. 自然的, 麻烦的思路</h1>


<div style="background: #ffffff"><div style="width: 30%; height: 20px; border-top: 1px dashed gray; border-left: 1px dashed gray;"></div><pre style=" background-color: white; font-size: small; line-height: 1.5em; padding: 0 15px 0 15px; margin: 0;">1 2 3 ... 7 [8] 9 ... 12 13 14
</pre><div style="width: 30%; height: 20px; border-bottom: 1px dashed gray; border-left: 1px dashed gray;"></div></div>


<p style="margin: 15px 0;">
要实现这个东西, 可能大部分人(包括我)一来的想法, 就是通过总页数与当前页的条件, 去计算 左 / 中 / 右 三部分的结果. 整个计算过程穷举所有可能的情况, 即处理所有的状态.
</p>
<p style="margin: 15px 0;">
这样做不能说不行, 因为市面上的好多分页器大概也是这样干的吧. 理论上可行, 但是实践中, 这样做的话成本太大了. 通过前面的例子也看到的, 面对的各种状态情况, 可以说非常非常复杂. 即使做出来了, 后续的维护, 需求变更的响应, 这些仍然需要继续以很大的成本去投入它, 稍有不慎, 出了问题要想定位到问题都困难吧, 在一堆涉及各种状态的代码中.
</p>

<a name="toc3"></a>
<h1 style=" padding: 4px; line-height: 1.3em; margin: 50px auto; font-size: 22px; border-bottom: 1px solid; clear: both;">3. 换个角度入手</h1>


<div style="background: #ffffff"><div style="width: 30%; height: 20px; border-top: 1px dashed gray; border-left: 1px dashed gray;"></div><pre style=" background-color: white; font-size: small; line-height: 1.5em; padding: 0 15px 0 15px; margin: 0;">1 2 3 ... 7 [8] 9 ... 12 13 14

  L   PRE    M    POST   R
</pre><div style="width: 30%; height: 20px; border-bottom: 1px dashed gray; border-left: 1px dashed gray;"></div></div>


<p style="margin: 15px 0;">
理想情况下的结果, 其实也是一个"完备"的结果. 我们从这个形式着手, 细致地分析一下我们面对的到底是什么东西.
</p>
<p style="margin: 15px 0;">
可以看到, 完整的结果, 一共是由 5 部分构成的, <em style=" color: #d75100; font-style: normal; ">L , PRE , M  , POST , R</em> .
</p>
<p style="margin: 15px 0;">
但是在一些"特殊"情况下, 这 5 部分不是全都出现的, 比如, 一共有 7 页(当前页是第 6 页):
</p>

<div style="background: #ffffff"><div style="width: 30%; height: 20px; border-top: 1px dashed gray; border-left: 1px dashed gray;"></div><pre style=" background-color: white; font-size: small; line-height: 1.5em; padding: 0 15px 0 15px; margin: 0;">1 2 3 ... 5 [6] 7
</pre><div style="width: 30%; height: 20px; border-bottom: 1px dashed gray; border-left: 1px dashed gray;"></div></div>


<p style="margin: 15px 0;">
这时, 结果中只有 <em style=" color: #d75100; font-style: normal; ">L , PRE, R(M)</em> 这几部分(最后即可以看成是 <em style=" color: #d75100; font-style: normal; ">M</em> , 也可以看成是 <em style=" color: #d75100; font-style: normal; ">R</em> ).
</p>
<p style="margin: 15px 0;">
传统的思路, 我们会去想, 通过计算, 算出  <em style=" color: #d75100; font-style: normal; ">L , PRE , M , POST , R</em> 这 5 部分的结果(包括它们是否应该存在), 但是, 这样很难.
</p>
<p style="margin: 15px 0;">
要得到结果, 我们还有另外一种选择, 那就是首先, <strong style=" color: red; font-weight: normal; ">我们忽略状态, 根据具体的规则, 先计算出结果</strong>.
</p>
<p style="margin: 15px 0;">
规则是我们之前提到的: " <em style=" color: #d75100; font-style: normal; ">显示前 3 页, 显示后 3 页, 以及当前页的前后 1 页</em> " . 假设现在共有 S 页, 当前页是第 P 页, 那么结果就是:
</p>

<div style="background: #ffffff"><div style="width: 30%; height: 20px; border-top: 1px dashed gray; border-left: 1px dashed gray;"></div><pre style=" background-color: white; font-size: small; line-height: 1.5em; padding: 0 15px 0 15px; margin: 0;">L = [1, 2, 3]
PRE = True
M = [P - 1, P, P + 1]
POST = True
R = [S - 2 , S - 1 , S]
</pre><div style="width: 30%; height: 20px; border-bottom: 1px dashed gray; border-left: 1px dashed gray;"></div></div>


<p style="margin: 15px 0;">
那么我们就可以得到:
</p>

<div style="background: #ffffff"><div style="width: 30%; height: 20px; border-top: 1px dashed gray; border-left: 1px dashed gray;"></div><pre style=" background-color: white; font-size: small; line-height: 1.5em; padding: 0 15px 0 15px; margin: 0;">1 2 3 ... P-1 [P] P+1 ... S-2 S-1 S
</pre><div style="width: 30%; height: 20px; border-bottom: 1px dashed gray; border-left: 1px dashed gray;"></div></div>


<p style="margin: 15px 0;">
毫无疑问, 上面的计算与结果都没有任何问题, 那我们拿一个"特殊"的实例来看看结果是什么, 就用前面的"一共有 <code style="margin: auto 3px; color: #228b22; font-family: monospace; ">S = 7</code> 页, 当前是第 <code style="margin: auto 3px; color: #228b22; font-family: monospace; ">P = 6</code> 页":
</p>

<div style="background: #ffffff"><div style="width: 30%; height: 20px; border-top: 1px dashed gray; border-left: 1px dashed gray;"></div><pre style=" background-color: white; font-size: small; line-height: 1.5em; padding: 0 15px 0 15px; margin: 0;">1 2 3 ... 5 [6] 7 ... 5 [6] 7
</pre><div style="width: 30%; height: 20px; border-bottom: 1px dashed gray; border-left: 1px dashed gray;"></div></div>


<p style="margin: 15px 0;">
剩下的事情, 就是去修辞这个看起来不太对的结果了, 这部分其实很容易(但是容易遗漏).
</p>

<ul style="line-height: 1.6em; padding: 0px; padding-left: 20px; margin: auto 30px;">
<li>当 <code style="margin: auto 3px; color: #228b22; font-family: monospace; ">M[0] - L[-1] &gt;= 2</code> 时, <em style=" color: #d75100; font-style: normal; ">PRE</em> 才显示出来.
</li>
<li>当 <code style="margin: auto 3px; color: #228b22; font-family: monospace; ">R[0] - L[-1] &gt;= 2</code> 时, <em style=" color: #d75100; font-style: normal; ">POST</em> 才显示出来.
</li>
<li><code style="margin: auto 3px; color: #228b22; font-family: monospace; ">M</code> 中只显示比 <code style="margin: auto 3px; color: #228b22; font-family: monospace; ">L[-1]</code> 大的.
</li>
<li><code style="margin: auto 3px; color: #228b22; font-family: monospace; ">R</code> 中只显示比 <code style="margin: auto 3px; color: #228b22; font-family: monospace; ">M[-1]</code> 大的.
</li>
<li><code style="margin: auto 3px; color: #228b22; font-family: monospace; ">L</code>, <code style="margin: auto 3px; color: #228b22; font-family: monospace; ">M</code> , <code style="margin: auto 3px; color: #228b22; font-family: monospace; ">R</code> 中, 都只显示不比 <code style="margin: auto 3px; color: #228b22; font-family: monospace; ">S</code> 大的.
</li>
<li><code style="margin: auto 3px; color: #228b22; font-family: monospace; ">L</code>, <code style="margin: auto 3px; color: #228b22; font-family: monospace; ">M</code> , <code style="margin: auto 3px; color: #228b22; font-family: monospace; ">R</code> 中, 都只显示比 <code style="margin: auto 3px; color: #228b22; font-family: monospace; ">0</code> 大的(这点在计算 <code style="margin: auto 3px; color: #228b22; font-family: monospace; ">L</code>, <code style="margin: auto 3px; color: #228b22; font-family: monospace; ">M</code>, <code style="margin: auto 3px; color: #228b22; font-family: monospace; ">R</code> 时就随便做了).
</li>
</ul>

<p style="margin: 15px 0;">
上面简单的几条规则, 就可以把不太对的结果, 修饰成(括号中的内容不会显示):
</p>

<div style="background: #ffffff"><div style="width: 30%; height: 20px; border-top: 1px dashed gray; border-left: 1px dashed gray;"></div><pre style=" background-color: white; font-size: small; line-height: 1.5em; padding: 0 15px 0 15px; margin: 0;">1 2 3 ... 5 [6] 7 (...) (5 [6] 7)
</pre><div style="width: 30%; height: 20px; border-bottom: 1px dashed gray; border-left: 1px dashed gray;"></div></div>


<p style="margin: 15px 0;">
来看看更多的例子:
</p>
<p style="margin: 15px 0;">
<code style="margin: auto 3px; color: #228b22; font-family: monospace; ">S=1, P=1</code>:
</p>

<div style="background: #ffffff"><div style="width: 30%; height: 20px; border-top: 1px dashed gray; border-left: 1px dashed gray;"></div><pre style=" background-color: white; font-size: small; line-height: 1.5em; padding: 0 15px 0 15px; margin: 0;">[1] 2 3 ... 0 [1] 2 ... -1 0 1

--&gt;

[1] (2 3) (...) (0 [1] 2) (...) (-1 0 1)   
</pre><div style="width: 30%; height: 20px; border-bottom: 1px dashed gray; border-left: 1px dashed gray;"></div></div>


<p style="margin: 15px 0;">
<code style="margin: auto 3px; color: #228b22; font-family: monospace; ">S=4, P=3</code>:
</p>

<div style="background: #ffffff"><div style="width: 30%; height: 20px; border-top: 1px dashed gray; border-left: 1px dashed gray;"></div><pre style=" background-color: white; font-size: small; line-height: 1.5em; padding: 0 15px 0 15px; margin: 0;">1 2 [3] ... 2 [3] 4 .. 2 [3] 4

--&gt;

1 2 [3] (...) (2 [3]) 4 (...) (2 [3] 4)
</pre><div style="width: 30%; height: 20px; border-bottom: 1px dashed gray; border-left: 1px dashed gray;"></div></div>


<p style="margin: 15px 0;">
"修饰" 这部分, 实践中在一些框架的模板部分, 都可以直接做了.
</p>

<a name="toc4"></a>
<h1 style=" padding: 4px; line-height: 1.3em; margin: 50px auto; font-size: 22px; border-bottom: 1px solid; clear: both;">4. 为何会有如此大的区别</h1>

<p style="margin: 15px 0;">
换个角度去考虑之后, 一个原本麻烦的问题, 被轻松解决了. 之后我一直在想, 怎么会有如此大的区别呢?
</p>
<p style="margin: 15px 0;">
我们实现的东西是一样的, 这就是说, 不管是传统的方法, 还是"变计算为应对"的方法, 它们的"描述能力"应该是一样的. 传统方法是在主动穷举所有的可能, 而后者则是在被动应对具体的可能.
</p>
<p style="margin: 15px 0;">
当你在穷举所有可能的状态时, 不同类型的状态之间, 还有着相互的影响, 于是, 相互的作用大大放大了你面对的信息量. 这也许就是为什么我们会觉得非常麻烦的原因所在.
</p>
<p style="margin: 15px 0;">
而当变成被动的应对这种方式时, 不同类型的状态之间, 相互的影响就不存在了(因为我们仅仅是信息的接收者, 没有创造信息, 也没有影响信息), 我们面对的只是独立的种种情况. 这种时候信息量就大大减少, 只需要简单地就每一种情况作出响应即可.
</p>
<p style="margin: 15px 0;">
我知道上面的话很抽象, 其实我本身现在也无法对这种奇妙的区别作出一种具体的描述. 但要类比的话, 这个小小的分页器的实现, 以及大到系统架构的设计, 我觉得都跟绘画是一样的 -- 从大到小, 从抽象到具体, 从整体到局部 -- 如果一开始就从细节着力, 除非你已经胸有成竹, 否则连基本的正确比例都把握不了吧.
</p>

<a name="toc5"></a>
<h1 style=" padding: 4px; line-height: 1.3em; margin: 50px auto; font-size: 22px; border-bottom: 1px solid; clear: both;">5. AngularJS的代码例子</h1>

<p style="margin: 15px 0;">
最后, 附上使用 <em style=" color: #d75100; font-style: normal; ">AngularJS</em> 实现的上面说的分页器的简单代码:
</p>

<div style="background: #ffffff"><div style="width: 30%; height: 20px; border-top: 1px dashed gray; border-left: 1px dashed gray;"></div><pre style=" background-color: white; font-size: small; line-height: 1.5em; padding: 0 15px 0 15px; margin: 0;">scope.L_COUNT <span style="color: #000000; font-weight: bold">=</span> <span style="color: #009999">2</span>;
scope.M_OFFSET <span style="color: #000000; font-weight: bold">=</span> <span style="color: #009999">1</span>;
scope.R_COUNT <span style="color: #000000; font-weight: bold">=</span> <span style="color: #009999">2</span>;

<span style="color: #999988; font-style: italic">//计算左,中,右分页</span>
<span style="color: #000000; font-weight: bold">var</span> get_group <span style="color: #000000; font-weight: bold">=</span> <span style="color: #000000; font-weight: bold">function</span>(count, per_page, page){
    scope.sum_page <span style="color: #000000; font-weight: bold">=</span> <span style="color: #0086B3">Math</span>.ceil(count <span style="color: #000000; font-weight: bold">/</span> per_page);
    <span style="color: #000000; font-weight: bold">if</span>(page <span style="color: #000000; font-weight: bold">&gt;</span> scope.sum_page <span style="color: #000000; font-weight: bold">||</span> page <span style="color: #000000; font-weight: bold">&lt;=</span> <span style="color: #009999">0</span>){page <span style="color: #000000; font-weight: bold">=</span> <span style="color: #009999">1</span>; scope.page <span style="color: #000000; font-weight: bold">=</span> page}
    scope.left <span style="color: #000000; font-weight: bold">=</span> [];
    scope.middle <span style="color: #000000; font-weight: bold">=</span> [];
    scope.right <span style="color: #000000; font-weight: bold">=</span> [];
    <span style="color: #000000; font-weight: bold">for</span>(<span style="color: #000000; font-weight: bold">var</span> i <span style="color: #000000; font-weight: bold">=</span> <span style="color: #009999">0</span>, l <span style="color: #000000; font-weight: bold">=</span> scope.L_COUNT; i <span style="color: #000000; font-weight: bold">&lt;</span> l; i<span style="color: #000000; font-weight: bold">++</span>){
        scope.left.push(i<span style="color: #000000; font-weight: bold">+</span><span style="color: #009999">1</span>);
    }
    <span style="color: #000000; font-weight: bold">for</span>(<span style="color: #000000; font-weight: bold">var</span> i <span style="color: #000000; font-weight: bold">=</span> <span style="color: #009999">0</span>, l <span style="color: #000000; font-weight: bold">=</span> scope.M_OFFSET; i <span style="color: #000000; font-weight: bold">&lt;</span> l; i<span style="color: #000000; font-weight: bold">++</span>){
        scope.middle.push(page<span style="color: #000000; font-weight: bold">-</span>i<span style="color: #000000; font-weight: bold">-</span><span style="color: #009999">1</span>);
    }
    scope.middle.push(page);
    <span style="color: #000000; font-weight: bold">for</span>(<span style="color: #000000; font-weight: bold">var</span> i <span style="color: #000000; font-weight: bold">=</span> <span style="color: #009999">0</span>, l <span style="color: #000000; font-weight: bold">=</span> scope.M_OFFSET; i <span style="color: #000000; font-weight: bold">&lt;</span> l; i<span style="color: #000000; font-weight: bold">++</span>){
        scope.middle.push(page<span style="color: #000000; font-weight: bold">+</span>i<span style="color: #000000; font-weight: bold">+</span><span style="color: #009999">1</span>);
    }
    <span style="color: #000000; font-weight: bold">for</span>(<span style="color: #000000; font-weight: bold">var</span> i <span style="color: #000000; font-weight: bold">=</span> <span style="color: #009999">0</span>, l <span style="color: #000000; font-weight: bold">=</span> scope.R_COUNT; i <span style="color: #000000; font-weight: bold">&lt;</span> l; i<span style="color: #000000; font-weight: bold">++</span>){
        scope.right.unshift(scope.sum_page<span style="color: #000000; font-weight: bold">-</span>i);
    }
}
</pre><div style="width: 30%; height: 20px; border-bottom: 1px dashed gray; border-left: 1px dashed gray;"></div></div>


<p style="margin: 15px 0;">
模板部分:
</p>

<div style="background: #ffffff"><div style="width: 30%; height: 20px; border-top: 1px dashed gray; border-left: 1px dashed gray;"></div><pre style=" background-color: white; font-size: small; line-height: 1.5em; padding: 0 15px 0 15px; margin: 0;"><span style="color: #000080">&lt;div&gt;</span>
  <span style="color: #000080">&lt;div</span> <span style="color: #008080">ng-show=</span><span style="color: #dd1144">&quot;sum_page &gt; 1&quot;</span><span style="color: #000080">&gt;</span>
    <span style="color: #000080">&lt;div</span> <span style="color: #008080">ng-repeat=</span><span style="color: #dd1144">&quot;o in left&quot;</span>
         <span style="color: #008080">ng-show=</span><span style="color: #dd1144">&quot;o &lt;= sum_page&quot;</span> <span style="color: #008080">ng-click=</span><span style="color: #dd1144">&quot;goto(o)&quot;</span>
         <span style="color: #008080">ng-class=</span><span style="color: #dd1144">&quot;{true: &#39;u-current&#39;}[o == page]&quot;</span><span style="color: #000080">&gt;</span>{{ o }}<span style="color: #000080">&lt;/div&gt;</span>

    <span style="color: #000080">&lt;div</span> <span style="color: #008080">ng-show=</span><span style="color: #dd1144">&quot;middle[0] &gt; left[L_COUNT - 1] + 1&quot;</span><span style="color: #000080">&gt;</span>···<span style="color: #000080">&lt;/div&gt;</span>

    <span style="color: #000080">&lt;div</span> <span style="color: #008080">ng-repeat=</span><span style="color: #dd1144">&quot;o in middle&quot;</span>
         <span style="color: #008080">ng-show=</span><span style="color: #dd1144">&quot;o &gt; left[L_COUNT - 1] &amp;&amp; o &lt;= sum_page&quot;</span>
         <span style="color: #008080">ng-click=</span><span style="color: #dd1144">&quot;goto(o)&quot;</span>
         <span style="color: #008080">ng-class=</span><span style="color: #dd1144">&quot;{true: &#39;u-current&#39;}[o == page]&quot;</span><span style="color: #000080">&gt;</span>{{ o }}<span style="color: #000080">&lt;/div&gt;</span>

    <span style="color: #000080">&lt;div</span> <span style="color: #008080">ng-show=</span><span style="color: #dd1144">&quot;right[0] &gt; middle[M_OFFSET * 2] + 1&quot;</span><span style="color: #000080">&gt;</span>···<span style="color: #000080">&lt;/div&gt;</span>

    <span style="color: #000080">&lt;div</span> <span style="color: #008080">ng-repeat=</span><span style="color: #dd1144">&quot;o in right&quot;</span>
         <span style="color: #008080">ng-show=</span><span style="color: #dd1144">&quot;o &gt; middle[M_OFFSET * 2] &amp;&amp; o &lt;= sum_page&quot;</span>
         <span style="color: #008080">ng-click=</span><span style="color: #dd1144">&quot;goto(o)&quot;</span>
         <span style="color: #008080">ng-class=</span><span style="color: #dd1144">&quot;{true: &#39;u-current&#39;}[o == page]&quot;</span><span style="color: #000080">&gt;</span>{{ o }}<span style="color: #000080">&lt;/div&gt;</span>
  <span style="color: #000080">&lt;/div&gt;</span>
<span style="color: #000080">&lt;/div&gt;</span>
</pre><div style="width: 30%; height: 20px; border-bottom: 1px dashed gray; border-left: 1px dashed gray;"></div></div>



<div style=" -moz-border-radius: 5px; -webkit-border-radius: 5px; -moz-box-shadow: 3px 3px 5px #333; -webkit-box-shadow: 3px 3px 5px #333; box-shadow: 3px 3px 5px #333;  border-radius: 5px; background-color: #2a9af9; padding: 4px; color: white; line-height: 1.3em; text-shadow: 2px 2px 2px black; margin-top: 100px; margin-bottom: 20px; font-size: medium; clear: both;">评论</div>
<div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname = 'zys';
  var disqus_identifier = 'paginator';
  var disqus_url = 'http://zouyesheng.com/paginator.html';
  var disqus_title = '做分页器时的一点感触';

  (function() {
   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
   dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>评论功能需要javascript的支持</noscript>
    

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29492100-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
    

<div style="font-size: x-small; text-align: right; margin-top: 50px;">
&copy;2010-2015 zouyesheng.com All rights reserved. Powered by <a href="https://github.com/" target="_blank">GitHub</a> , <a href="http://txt2tags.org/" target="_blank">txt2tags</a> , <a href="http://www.mathjax.org/" target="_blank">MathJax</a>
</div>
    
<!-- xhtml code generated by txt2tags 2.6 (http://txt2tags.org) -->
</div></body></html>
